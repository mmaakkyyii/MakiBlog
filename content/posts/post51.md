---
title: "CoRE-1 2024に参加しました"
date: 2024-03-31T11:18:22+09:00
draft: false
categories: ["イベント","CoRE"]
tags: ["ロボット","ロボコン","CoRE"]
---

こんにちは、マッキーです。  
今回はタイトルの通りCoREに社会人チームMA-KINGとして参加してきたのでそのまとめです。  
![](../img/CoRE2024_pic1.JPG)
- [CoRE(The Championship of Robotics Engineers)とは](#corethe-championship-of-robotics-engineersとは)
- [MA-KINGについて](#ma-kingについて)
  - [チームロゴについて](#チームロゴについて)
- [機体紹介](#機体紹介)
  - [メカ](#メカ)
  - [電装](#電装)
  - [ソフト](#ソフト)
  - [スケジュールの概要](#スケジュールの概要)
  - [予算](#予算)
- [大会レポート](#大会レポート)
  - [マシンチェック](#マシンチェック)
  - [リハーサル](#リハーサル)
  - [1日目 総大将決定戦](#1日目-総大将決定戦)
  - [グループB](#グループb)
  - [グループD](#グループd)
  - [1日目終了後](#1日目終了後)
    - [映像トラブル](#映像トラブル)
    - [同盟結成後](#同盟結成後)
  - [2日目](#2日目)
    - [準決勝](#準決勝)
    - [決勝戦](#決勝戦)
  - [3日目・交流会](#3日目交流会)
- [参加した感想など](#参加した感想など)


# CoRE(The Championship of Robotics Engineers)とは
[CoRE](https://core.scramble-robot.org/about-core/)は[Scramble](https://scramble-robot.org/)が主催するエンジニア選手権です。

ロボット競技としては、フライングディスクを射出するFPSゲームのような視点で操縦するロボットを製作します。そこで複数のチームによる同盟を結成しトーナメント選を行います。負けたチームも勝ったチームに加わり、次の試合に進んでいきます。  
ロボコンの見た目をしていますが、CoREはエンジニアの育成を目的としています。競技だけではなくその開発過程についても評価対象として複数の賞が用意されているところも大きな特徴です。
{{<youtube Ev4a87VXtDs>}}

# MA-KINGについて
MA-KING(メイキング)はCoREに参加するために結成されたチームです。この選手権は最低でも6人のメンバーを必要としています。今回は私が働いている会社の有志と大学時代のサークルの知り合いが集まったチームを作りました。  
チーム名はマッキー君がチームを立ち上げたことからマッキーキング→MAKINGみたいな語源があります。いつまでもロボットを作っていくぞ！という気持ちも含まれているとかいないとか。

今年度はまずは大会で動くロボットを作るというところを掲げて開発を行いました。色々やろうとして間に合わないので来年以降も参加すること前提でまずは1台作るという方針でした。

開発過程はこちら：[#CoREjp_MAKING](https://twitter.com/search?q=%23CoREjp_MAKING)

## チームロゴについて
チームロゴはChatGPTの画像生成を基に、それをさらに加工して作りました。かわいいと思います。  

![](../img/ma_king_logo.jpg)  
↓こちらがいろいろ試してイメージに近い画像を生成してもらってベースにすることにした画像です。ChatGPTを使った感想としては文字を生成するのはかなり難しそうというところでした。文字は基本的に後付です。
KING感のある王冠と赤色がポイントになっています。機体の3Dプリンタパーツでも赤を意識して使っていたりします。
![](../img/MA-KING_logo_ChatGPT.png)

# 機体紹介
こちらがMA-KINGが作製した機体です。
![](../img/CoRE2024_machine.jpg)

{{<youtube F7JzD6_xu3E>}}

今回は初参加+時間もあまりとれないことが予想されたので余計な機能は載せずにシンプルにすることを掲げて作製しました。

## メカ
足回りにはロボマスモータ(M3508)とメカナムホイールを使いました。   
さらに自作のバネによるサスペンション機構も入っています。
{{<tweet user="Atimsys" id="1771863501729878236">}}

射出機構は2つのベルトで射出できるようになっています。装填機構はシンプルですが連射性能が高いです。
{{<tweet user="Infinite_Loop_" id="1771882282548412797">}}

ピッチ角調整機構もついていて高さ調整ができます。直動+リンクで射出機構を傾けられるような機構がついています。
![](../img/CoRE2024_pitch.jpg)

## 電装
回路系も動かすことを最優先で既製品を積極的に利用しています。特にモータとマイコンボードは主にロボマス製品を使いました。  
![](../img/CoRE2024_system_configuration.jpg)
[こちらのスライド](https://docs.google.com/presentation/d/1eR794-9jqVosRKfE0CcXBSBUsUJoafKqGmErZREfjJ0/edit#slide=id.g2bb39b48996_0_0)で細かく見れるようになっています。  
既製品であまりなさそうなリレー基板やちょっとした電源基板、エンコーダ基板などは今回の機体に合わせて作製しました。

## ソフト
ソフトウエアは主に3つありました。機体制御用のマイコン用ソフト、無線コントローラ用PCソフト、画像処理・カメラ用ソフトの3つがあります。

マイコン側のソフトは一応公開されています。各モータの速度制御をしてコントローラに合わせて動かします。
[GitHub](https://github.com/CoRE-MA-KING/RoboMasterDevBoard)

無線コントローラ用のソフトはPSコントローラを読み取り、いい感じにフォーマットして無線モジュールにシリアル通信でコントローラの状態を送ります。
![](../img/CoRE2024_controller.jpg)

将来的に画像処理を生かした自動化などを考えていたためJetson AGX OrinとRealSenseを搭載しています。来年の開発用に試合中の録画をできるようにして実際に録画してきました。
{{<youtube phWmsdQsTFM>}}

こちらに加え2つのWebカメラの画像を操縦者が切り替えられるようにしたり、残りの残弾数やピッチ角、マシン状態などを画像に合成して映像伝送させていました。
![](../img/CoRE2024_SS.png)

ちなみに私はマイコンのソフトと回路の全体像を決めたりする部分を担当していました。それ以外は優秀なメンバーがいい感じにしてくれていました。ありがとうございました。

## スケジュールの概要
11/13に専用のDiscordが立ち上がっていましたが、エントリーシート提出ギリギリでした。  
当初の予定では12月中にメカ設計、回路設計、1月中にハードウェア完成を目指していました。メカは機構ごとに分担していたので徐々にに出来上がってきていました。射出は1月中旬ごろに実験に入り、足回りの設計も1月ごろには原形はできて2月下旬ごろには走れるくらいまで組みあがっていました。ピッチ調整機構はかなり大会直前に完成してなんとか実践でも使うことができました。回路類と無線コントローラ系は2月頃には完成していて、ソフト類はずっと並行して作成していました。

操縦の練習などももう少しやりたかったですが、場所が使える時間が限られていたため2,3日分くらいしかできていませんでした。それでもリハーサルや本番の試合中に操縦することで何とか動かせるようになりました。

## 予算
かかった金額は50万はしないくらいでした。私物のPCやRealSense、ちょっとしたねじやコネクタなどは費用に含まれていません。特に大きいのはロボマスモータやアンプ、メカナムホイール、バッテリーなどでこれらはすべて新規で購入しました。来年はここら辺のパーツを使いまわせればもう少し費用は抑えられるかなと思います。

練習場所や一部工作機械については会社の会議室や設備を使わせてもらいました。ありがとうございます。

# 大会レポート

## マシンチェック
マシン重量が30 kg以下になるべきところがちょうど30 kgになっていたいろいろ不要なパーツを外して何とか通過しました。  
マシン軽量するときに取り除きましたが、とがったパーツが外側に出ているところがあると指摘を受けました。  
もう一つ通信エラー時にアクチュエータ電源をOFFにしていないというプログラム上のミスがありました。  
あまり製作の余裕がなかったとはいえここは一発で通るように準備をすべきでした。
{{<tweet user="ma_king_core" id="1771362734250266702">}}
## リハーサル
リハーサルというのが一応ありました、ただ、マシンチェックが遅れてしまい2日目の決勝戦用のリハーサルでロボットを動かせなかったのがあまり良くなかったです。後述のDグループでの映像トラブルはここに出れていればあらかじめ対応できていたのかもしれませんでした。

## 1日目 総大将決定戦
総大将決定戦は審査ビデオを提出し、その内容でグループが設定されました。MA-KINGはシードを取ることはできませんでしたが、ある程度ロボットが動くと認められ(?)グループDの試合に数合わせとしても出場しました。
{{<youtube g99aZ9_2WnY>}}
{{<tweet user="Scramble_CoRE" id="1770254059431182536">}}

## グループB
* [グループB第1試合](https://www.youtube.com/watch?v=vzNiVW0RnFI&t=14815s)  
攻撃側にSETAGAYA Eclipseさんがなかなか安定感があり操縦も洗練されていました。こちらの機体は基本的な動作は動いていましたが、完全敗北でした。一度もダメージを与えることができませんでした。
* [グループB第2試合](https://www.youtube.com/watch?v=vzNiVW0RnFI&t=14815s)  
2試合目は射出機構用のモータの信号線が抜けているという痛恨のミスがあり射出ができずずっと逃げ回っていました。かなり追い込まれていてギリギリ撃破はされないという状態でした。攻撃サイドなのでHPが高く本来であれば攻めていけるポジションだったのですが、ここでほぼ何もできなかったのはかなり残念でした。

* [グループB第3試合](https://www.youtube.com/watch?v=vzNiVW0RnFI&t=3582s)
3試合目はケーブルが抜けていた部分をピットメンバーが見つけてくれて差しなおしてくれたので射出ができるようになりました。そして何回かダメージを与えることができました。序盤でフリスビーの残弾がなくなってしまい早々に戦線から離れていました。
終盤に映像が止まってしまい、操作がほぼできなくなってしまいました。

* [グループB第4試合](https://www.youtube.com/watch?v=vzNiVW0RnFI&t=3951s)
映像が止まったままのため何も動かせなかったです。orz

## グループD
グループDの試合では映像が正しく送られない状態になっていて一生何もできていなかったです。  
今回利用していたJetsonの映像出力の解像度が正しくなっていなかったようで終わりでしたorz  

何も見えないけど射出だけしているシーン集です
[https://www.youtube.com/live/vzNiVW0RnFI?si=KjW_O9lB9BQUs-IQ&t=7625](https://www.youtube.com/live/vzNiVW0RnFI?si=KjW_O9lB9BQUs-IQ&t=7625)

こちらでは仲間サイドを連射して落としていて草でした()
[https://www.youtube.com/live/vzNiVW0RnFI?si=HnM8g_t72rfs4v8O&t=7994](https://www.youtube.com/live/vzNiVW0RnFI?si=HnM8g_t72rfs4v8O&t=7994)

こちらは攻撃サイドでしたが自分のダメージは見れていたので相手に攻撃を受けてとりあえず打っています。
[https://www.youtube.com/live/vzNiVW0RnFI?si=DJfkSfKOJkTkgpt7&t=8274](https://www.youtube.com/live/vzNiVW0RnFI?si=DJfkSfKOJkTkgpt7&t=8274)

## 1日目終了後
### 映像トラブル
グループDでの映像トラブルの原因究明のため、運営の方から映像伝送装置を借りて調整させていただきました。
OS起動後に映像出力の解像度が正しく設定されていないことが分かったのでこちらの設定をしてうまく起動することを確認しました。

本大会では3種類の映像伝送装置があり、グループDの時の伝送装置との相性が悪かったようでした。ちょうど勝ち点には関係ないグループDのときに当たったので運がよかったです。

### 同盟結成後
同盟が決定したあとは自分たちのロボットの特徴を共有して、どのように動かせそうかという相談をしました。  
とくにMA-KINGは映像トラブルがあったので、相性がよさそうな伝送装置を使えるようにお願いしたりしていました。実際に席を固定してもらうなどの対応をしていました。

## 2日目
### 準決勝
準決勝は4vs4のロボットの対戦でした。2本先取で勝利となります。
{{<youtube S1zGDQoMSXo>}}

基本的にここではMA-KINGが用意していた動作はすべて動かすことができました。何度か相手にダメージを与えることができていたと思います。  
戦略としては基本的にどのあたりにロボットを配置するかを決めておいて相手を迎え撃つというものでした。また、フリスビーの補給の際は声を掛け合って衝突しないようにするという方針でした。  

![](../img/CoRE2024sem_final_position.jpg) 
結果としては大ロボーズ同盟に入って2-0でストレート勝ちすることができました。

[ここら辺](https://www.youtube.com/live/S1zGDQoMSXo?si=6jBCur6AlmOYvyU3&t=7116)で補給エリアに向かうタイミングなどはうまく連携が取れていたと思います。 左上の方でMA-KINGが補給完了してすぐに大ロボーズさんが補給に入っていて無駄がない動きができているように見えます。

### 決勝戦
決勝戦は、5対5のロボットによる対戦形式で、先に3勝を挙げたチームが勝利となります。この戦いでは、これまでに倒された同盟チームが勝ち上がったチームと合流していくため、最終的には計8チームが一つの大きな同盟を形成します。大会のルールでは、この8チームすべてが少なくとも一度は試合に参加する必要があります。そのため、決勝戦の3試合目までには、すべてのチームが一度は出場することになります。  
MA-KINGはある程度安定した動きができていたり5試合連続で動かすこともできる(はず)ということで5試合すべてに出場しました。

{{<youtube UWSe1TFjZzk>}}

![](../img/CoRE2024_final_team.jpg)


第4試合では最初の走り始めのケーブル用の段差のところの衝撃で映像伝送が止まってしまいました。序盤で動かなくなってしまったのでほぼ役に立たなかったですね…

第5試合では最後MA-KINGが撃破できていたと思います。3本先取で2-2まで行ってから最後の最後もかなり激熱な試合になっていたと思いますが、最終的に競技優勝の役に立てた(と思う)のでよかったです。
{{<youtube -m_j2wzJcUQ>}}

## 3日目・交流会
ピットで余裕があったタイミングやホテルや3日目の交流会ではいろいろなチームの方たちの話を聞けたり情報交換ができて楽しかったです。  
ジュニアチームの方たちは想像以上にしっかりしていてすごかったです。
{{<twitter user="mmaakkyyii" id="1772058938290372837">}}
高専の方たちがかなり参加されていましたが、新入生とかの練習大会みたいな位置づけとして参加されているという話をきいてなるほどね～となっていました。

社会人チームの方たちの話ではやはり加工場や練習場所の問題をどうするかみたいなところでいろいろ工夫されていてそうだよな～という気持ちになっていました。

# 参加した感想など
楽しかったです。

目標であった大会に無事出場できたこと、相手の撃破なども何度かすることができた点はよかったと思います。さらに大ロボーズ同盟として競技優勝することもできてよかったです。  
一方映像や電装回りのトラブルがあったのは点と、マシンチェックに一発で通過できなかったのは反省点です。

やはり大会に出ると次やりたいことなどがいろいろ出てきたので、次の大会ではさらにいい機体を作っていきたいです。また今年はほとんどちゃんと手を付けられていませんでしたが、大会が用意している表彰項目も狙っていきたいと思います。

それではまた来年👋👋

{{<twitter user="ma_king_core" id="1771847788969537574">}}